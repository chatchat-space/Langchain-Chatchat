---
author: 技术平台部
---
# 参数校验

## 框架集成hibernate validator

> 当我们需要在后端进行校验数据。当数据不过多时，我们可以手写校验规则。当传入的数据过多时，我们就需要使用Hibernate提供的一种校验框架来进行校验。

在后端接收数据时，我们一般使用bean的方式进行接收，所以我们可以为需要校验数据的字段加上校验注解，来实现第一步校验的配置
### 1. 为字段添加校验规则
```java
public class StudentBO {

    private Integer id;

    @NotBlank(message = "学生名称不能为空")
    private String name;

    @Pattern(regexp = "^((13[0-9])|(15[^4,\\D])|(18[0,5-9]))\\d{8}$", message = "手机格式不正确")
    private String mobile;

    @Email(message = "邮箱格式不正确")
    private String email;

    /**
     * 0男 1女
     */
    @Min(value = 0, message = "性别选择不正确")
    @Max(value = 1, message = "性别选择不正确")
    private Integer sex;

    /**
     * get和set方法占位置 不做实现
     */

}
```
| 注解                              | 功能           | 
| ----------------------------------|:-------------:|
| @Null                             |  字段必须为空   |
| @NotNull                          |   字段必须不为空    |
| @NotBlank                         |  用于字符串不为空，且长度不为0     |
| @AssertTrue                       |   字段值为true    |
| @AssertFalse                      |  字段值为false   |
| @Min(value = long类型)            |  字段值为数字，必须大于等于指定最小值     |
| @Max(value = long类型)            | 字段值为数字，必须小于等于指定最大值    |
| @DecimalMin(value = String类型)   |   字段值为数字，必须大于等于指定最小值    |
| @DecimalMax(value = String类型)   |   字段值为数字，必须小于等于指定最大值    |
| @Size(min=, max=)                 |  字段长度必须在指定的范围内   |
| @Pattern(regex=“自定义校验规则”)   |  字段必须符合校验规则     |
| @Email                            |   字段必须为邮箱格式    |
| @Length(min=,max=)                |   字符串的长度在指定的范围内    |
| @NotEmpty                         |  字符串非空   |

### 2. 使校验规则生效

> 在controller接收数据时，需要加入@Valid或者@Validated注解，让bean中的校验规则生效

![](./assets/参数校验/2022-05-23-16-18-56.png)

### 3. 返回校验提示信息

> 当输入信息违反校验规则时，就会触发MethodArgumentNotValidException异常，我们可以使用自定义全局异常处理类来进行处理

```java
@RestControllerAdvice
public class GlobalExceptionHandler {
    
 	@ExceptionHandler(MethodArgumentNotValidException.class)
    public Object validExceptionHandler(MethodArgumentNotValidException e) {
        //获取校验发生时的提示信息
        String message = e.getBindingResult().getFieldError().getDefaultMessage();
        return AjaxResult.error(message);
    }  
    
}
```



