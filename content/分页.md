---
author: 技术平台部
---
# 分页

## Searchable分页方法

- 利用NativeQuery注解实现

```java
//分页查询
  @NativeQuery(value = "select * from t_user_test t where name =:name ")
  public Page<UserTemp> findBySearchablePage(@Param("name")String name, @Param("searchable")Searchable searchable);
```

- 利用BaseRepository实现，通过继承BaseRepository基类

```java
    //利用JPA 分页查询
    Page<UserInfo> paging = userInfoRepository.paging(searchable);

    //利用NativeSql分页查询
    Page<UserInfo> userInfos = userInfoRepository.pagingByNativeSql("select * from t_user", searchable);
```

- Mybatis Mapper分页

```java
    public interface UserMapper<T> extends BaseMybatisMapper<UserInfoMP>  {
        /**
         * 对应resources/mapping/UserMapper.xml中的selectId配置
        */
        UserInfoMP selectId(String id);

        @Select("select * from t_user_test where name = #{name}")
        List<UserInfoMP> selectByAnno(String name);

        @Select("select * from t_user_test where name=#{arg0} and ${searchable.whereClause} ${searchable.orderClause}")
        List<UserInfoMP> paging(String name, @Param("searchable") Searchable searchable);

        @Select("select * from t_user_test where  ${searchable.whereClause} ${searchable.orderClause}")
        List<UserInfoMP> paging2(@Param("searchable") Searchable searchable);
    }
```

## 演示

- Chontroller

```java
@RestController
@RequestMapping("/userTest")
public class JpaUserInfoController {

    @Autowired
    private JpaIUserInfoService jpaIUserInfoService;

    @RequestMapping(value = "test", method = RequestMethod.GET)
    public Page<UserInfo> findBySearchablePage() {
        Searchable searchable = new SearchRequest();
        return jpaIUserInfoService.findBySearchablePage("xiao A", searchable);
    }
    }
```

- Service
  
  ```java
      @Override
    public Page<UserInfo> findBySearchablePage(String name, Searchable searchable) {
        return jpaUserInfoRepository.findBySearchablePage(name, searchable);
    }
  ```

- Repository

```java
@Repository
public interface JpaUserInfoRepository extends BaseRepository<UserInfo, String> {

    //分页查询
    @NativeQuery(value = "select * from t_test_user t where name =:name ")
    Page<UserInfo> findBySearchablePage(@Param("name")String name, @Param("searchable") Searchable searchable);

}

```

- 结果
  ![](./assets/分页/2022-05-30-11-34-26.png)


